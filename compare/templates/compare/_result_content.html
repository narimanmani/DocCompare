<div class="app-card app-result-card">
    {% if storage_error %}
    <div class="app-banner app-banner--warning">
        <p class="app-banner-title">Unable to save result</p>
        <p>{{ storage_error }}</p>
    </div>
    {% endif %}
    <header class="app-result-header">
        <div>
            <p class="app-eyebrow">Comparison summary</p>
            <h1 class="app-result-title">Your diff is ready</h1>
            <p class="app-result-meta">Generated on {{ generated_at|date:"SHORT_DATETIME_FORMAT" }}</p>
            {% if filenames %}
                <p class="app-result-meta app-result-meta--pair">Comparing <span>{{ filenames.0 }}</span> â†” <span>{{ filenames.1 }}</span></p>
            {% endif %}
        </div>
        <div class="app-result-actions">
            <a href="{% url 'compare:upload' %}" class="app-button app-button--subtle">New comparison</a>
            {% if persisted and result %}
                <a href="{% url 'compare:export-pdf' result.pk %}" class="app-button app-button--secondary">Export PDF</a>
            {% else %}
                <span class="app-button app-button--disabled" title="Configure the database to enable saved results and downloads.">Export unavailable</span>
            {% endif %}
        </div>
    </header>
    <section class="app-result-layout">
        <div class="app-result-sidebar">
            {% include 'compare/_summary.html' %}
            {% include 'compare/_controls.html' %}
            {% include 'compare/_link_changes.html' %}
        </div>
        <article class="app-result-diff" aria-live="polite">
            <div class="prose app-prose max-w-none">
                {{ diff_html|safe }}
            </div>
        </article>
    </section>
</div>
