<details class="group border border-slate-200 rounded-lg bg-slate-50/70 p-3">
    <summary class="flex items-center justify-between gap-3 cursor-pointer select-none">
        <span class="flex items-center gap-2 text-sm font-semibold text-slate-700">
            <span aria-hidden="true">{{ icon }}</span>
            {{ label }}
        </span>
        <span class="text-xs text-slate-500 group-open:hidden">Show details</span>
        <span class="text-xs text-slate-500 hidden group-open:inline">Hide details</span>
    </summary>
    <div class="mt-3 space-y-2 text-sm text-slate-700">
        {% if change.before %}
            <div class="space-y-1">
                <p class="text-xs uppercase tracking-wide text-slate-500">Previous link</p>
                {% if change.before.text %}
                    <p class="truncate" title="{{ change.before.text }}">Text: {{ change.before.text }}</p>
                {% endif %}
                {% if change.before.href %}
                    <p class="truncate" title="{{ change.before.href }}">URL: {{ change.before.href }}</p>
                {% else %}
                    <p class="text-amber-600 text-xs">URL missing</p>
                {% endif %}
            </div>
        {% endif %}
        {% if change.after %}
            <div class="space-y-1">
                <p class="text-xs uppercase tracking-wide text-slate-500">New link</p>
                {% if change.after.text %}
                    <p class="truncate" title="{{ change.after.text }}">Text: {{ change.after.text }}</p>
                {% endif %}
                {% if change.after.href %}
                    <p class="truncate" title="{{ change.after.href }}">URL: {{ change.after.href }}</p>
                {% else %}
                    <p class="text-amber-600 text-xs">URL missing</p>
                {% endif %}
            </div>
        {% endif %}
        {% if change.notes %}
            <p class="text-xs text-amber-600">Notes: {{ change.notes|join:', ' }}</p>
        {% endif %}
        {% with target=change.after.href|default:change.before.href %}
            {% if target %}
                <button type="button" class="copy-link-button inline-flex items-center gap-1 rounded bg-indigo-600 px-2 py-1 text-xs font-semibold text-white" data-copy-text="{{ target }}">
                    <span aria-hidden="true">ðŸ“‹</span>
                    Copy URL
                </button>
            {% endif %}
        {% endwith %}
    </div>
</details>
